{% extends 'base.html' %}

{% block content %}
<style>
    .max-w-8xl {
        max-width: 90rem; /* 1440px */
        margin-left: auto;
        margin-right: auto;
    }
    
    .form-input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        background-color: white;
        border: 1px solid rgb(253, 230, 138);
        border-radius: 0.5rem;
        outline: none;
        transition: all 0.2s;
    }
    
    .form-input:focus {
        border-color: rgb(245, 158, 11);
        box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
    }
    
    .form-textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        background-color: white;
        border: 1px solid rgb(253, 230, 138);
        border-radius: 0.5rem;
        outline: none;
        transition: all 0.2s;
    }
    
    .form-textarea:focus {
        border-color: rgb(245, 158, 11);
        box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
    }
    
    .input-icon {
        position: absolute;
        top: 50%;
        left: 0.75rem;
        transform: translateY(-50%);
        color: rgb(156, 163, 175);
        pointer-events: none;
    }
</style>

<div class="relative py-12 min-h-[80vh]">
    <!-- Background Elements -->
    <div class="absolute inset-0 z-0">
        <div class="absolute inset-0 bg-gradient-to-br from-amber-500/5 via-amber-600/5 to-transparent"></div>
    </div>
    
    <!-- Animated Background Elements -->
    <div class="absolute inset-0 z-0 overflow-hidden">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-amber-400/5 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-1/3 right-1/3 w-72 h-72 bg-blue-500/5 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
    </div>
    
    <div class="max-w-8xl mx-auto px-4 z-10 relative">
        <!-- Header with glassmorphism -->
        <div class="backdrop-blur-md bg-white/60 p-6 rounded-xl border border-white/20 shadow-lg mb-8" data-aos="fade-up">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <div class="bg-amber-100 p-3 rounded-full mr-4">
                        <i class="fas fa-life-ring text-amber-600 text-xl"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-amber-900">Support Request</h1>
                </div>
                <a href="{% url 'home' %}" class="text-amber-600 hover:text-amber-800 font-medium flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Home
                </a>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left side - Information -->
            <div class="lg:col-span-1">
                <div class="backdrop-blur-lg bg-white/90 p-6 rounded-xl border border-white/20 shadow-lg mb-6" data-aos="fade-up">
                    <h2 class="text-xl font-bold text-amber-900 mb-4">
                        <i class="fas fa-info-circle mr-2"></i>
                        About Support Requests
                    </h2>
                    
                    <p class="text-gray-700 mb-4">
                        Use this form to request account verification or to appeal an account deactivation. Our support team will review your request and respond as soon as possible.
                    </p>
                    
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                        <div class="flex">
                            <div class="flex-shrink-0 text-blue-500">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-blue-800">
                                    For account verification, please provide details about your livestock business or operation to help us verify your identity.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-amber-50 border-l-4 border-amber-500 p-4">
                        <div class="flex">
                            <div class="flex-shrink-0 text-amber-500">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm text-amber-800">
                                    Typical response time is 1-2 business days. Please ensure your contact information is correct.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="backdrop-blur-lg bg-white/90 p-6 rounded-xl border border-white/20 shadow-lg" data-aos="fade-up" data-aos-delay="100">
                    <h3 class="font-bold text-amber-900 mb-4">Contact Options</h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <div class="bg-amber-100 h-10 w-10 rounded-full flex items-center justify-center mr-3">
                                <i class="fas fa-envelope text-amber-600"></i>
                            </div>
                            <div>
                                <p class="font-medium">Email Support</p>
                                <p class="text-sm text-gray-600">support@livestockmanager.com</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center">
                            <div class="bg-amber-100 h-10 w-10 rounded-full flex items-center justify-center mr-3">
                                <i class="fas fa-phone text-amber-600"></i>
                            </div>
                            <div>
                                <p class="font-medium">Phone Support</p>
                                <p class="text-sm text-gray-600">+91 123-456-7890</p>
                                <p class="text-xs text-gray-500">Mon-Fri, 9 AM - 5 PM IST</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right side - Support Request Form -->
            <div class="lg:col-span-2">
                <div class="backdrop-blur-lg bg-white/90 p-6 rounded-xl border border-white/20 shadow-lg" data-aos="fade-up" data-aos-delay="50">
                    <h2 class="text-xl font-bold text-amber-900 mb-6">
                        <i class="fas fa-paper-plane mr-2"></i>
                        Submit Support Request
                    </h2>
                    
                    <form method="post" class="space-y-6" id="support-form">
                        {% csrf_token %}
                        
                        <!-- Username -->
                        <div class="space-y-2">
                            <label for="username" class="block text-sm font-medium text-amber-900">Username*</label>
                            <div class="relative">
                                <span class="input-icon">
                                    <i class="fas fa-user"></i>
                                </span>
                                <input type="text" id="username" name="username" required class="form-input" value="{{ request.user.username|default:'' }}" {% if request.user.is_authenticated %}readonly{% endif %}>
                            </div>
                            <p class="text-xs text-gray-500">Your registered username in the system</p>
                        </div>
                        
                        <!-- Email -->
                        <div class="space-y-2">
                            <label for="email" class="block text-sm font-medium text-amber-900">Email Address*</label>
                            <div class="relative">
                                <span class="input-icon">
                                    <i class="fas fa-envelope"></i>
                                </span>
                                <input type="email" id="email" name="email" required class="form-input" value="{{ request.user.email|default:'' }}" {% if request.user.is_authenticated %}readonly{% endif %}>
                            </div>
                            <p class="text-xs text-gray-500">We'll contact you at this email address</p>
                        </div>
                        
                        <!-- Request Type -->
                        <div class="space-y-2">
                            <label for="request_type" class="block text-sm font-medium text-amber-900">Request Type*</label>
                            <div class="relative">
                                <span class="input-icon">
                                    <i class="fas fa-tag"></i>
                                </span>
                                <select id="request_type" name="request_type" required class="form-input appearance-none">
                                    <option value="" disabled selected>Select request type</option>
                                    <option value="verification">Account Verification Request</option>
                                    <option value="activation">Account Activation Appeal</option>
                                    <option value="other">Other Support Request</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                                    <i class="fas fa-chevron-down text-xs"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Message -->
                        <div class="space-y-2">
                            <label for="message" class="block text-sm font-medium text-amber-900">Message*</label>
                            <textarea id="message" name="message" rows="5" required class="form-textarea" placeholder="Please provide details about your request, including why you need verification or why your account should be reactivated..."></textarea>
                            <p class="text-xs text-gray-500">Please be as detailed as possible to help us process your request faster</p>
                        </div>
                        
                        <!-- Terms -->
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="terms" name="terms" type="checkbox" required class="w-4 h-4 text-amber-500 border-gray-300 rounded focus:ring-amber-500">
                            </div>
                            <div class="ml-3 text-sm">
                                <label for="terms" class="text-gray-700">I confirm that all the information provided is accurate and truthful</label>
                            </div>
                        </div>
                        
                        <div class="pt-4 flex justify-end">
                            <button type="submit" class="px-6 py-3 bg-gradient-to-r from-amber-400 to-amber-500 text-white font-medium rounded-lg shadow-md hover:shadow-lg hover:from-amber-500 hover:to-amber-600 transition-all transform hover:-translate-y-0.5 duration-300">
                                <i class="fas fa-paper-plane mr-2"></i>
                                Submit Request
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize animations if AOS is available
        if (typeof AOS !== 'undefined') {
            AOS.refresh();
        }
        
        // Form validation
        const supportForm = document.getElementById('support-form');
        if (supportForm) {
            supportForm.addEventListener('submit', function(e) {
                const username = document.getElementById('username').value.trim();
                const email = document.getElementById('email').value.trim();
                const message = document.getElementById('message').value.trim();
                const requestType = document.getElementById('request_type').value;
                const terms = document.getElementById('terms').checked;
                
                if (!username || !email || !message || !requestType || !terms) {
                    e.preventDefault();
                    alert('Please fill all required fields and agree to the terms.');
                    return;
                }
                
                // Simple email validation
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(email)) {
                    e.preventDefault();
                    alert('Please enter a valid email address.');
                    return;
                }
            });
        }
    });
</script>
{% endblock %}
